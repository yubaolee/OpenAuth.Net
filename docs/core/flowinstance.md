# 工作流介绍

OpenAuth.Net工作流基于国际标准的BPMN2.0规范，并在此基础上做了一些扩展，以满足国内各种需求。系统工作流分为两个大类：

1. 无业务关联流程，如请假、报销等。

![无业务关联流程](http://img.openauth.net.cn/2025-04-06-22-35-35.png)

2. 有业务关联流程，如采购、销售等。

![订单送审](http://img.openauth.net.cn/2025-04-06-22-34-34.png)

这两种流程的差异有以下几点：

| 对比维度 | 无业务关联流程 | 有业务关联流程 |
|---------|--------------|--------------|
| 适用场景 | 请假、报销等日常办公 | 采购、销售、入库等业务操作 |
| 发起方式 | 流程中心 -> 我的流程 -> 新的申请 | 直接在业务模块中发起（如：仓储中心 -> 入库订单 -> 送审） |
| 表单类型 | 简单表单，适用拖拽表单设计器 | 复杂表单，需要自定义表单或URL表单 |
| 审批结束处理 | 仅更新流程状态 | 需要修改业务数据状态 |

表中提到的表单类型差异可以查看：[表单设计](./form.md)


# 基本操作

一个完整的工作流从设计到发起，到审批，需要经过：

1. 表单设计：【基础配置/表单设计】中添加一个用于流程的表单；

2. 流程设计：【基础配置/流程设计】中添加一个流程模版，流程模版选择刚刚建的表单；

3. 流程发起：【流程中心/我的流程】中【新的申请】创建一个流程实例，或在业务系统中直接【送审】发起；

4. 流程审批：【流程中心/待处理流程】中进行审批；

这里只介绍开源版本的操作流程，vue版本操作流程请参考👉[操作手册](/pro/startflow.md)

## 流程设计

在【基础配置/流程设计】界面，点击“添加模板”。填写好流程模板的名称及需要的信息。点击“选择表单”选择流程关联的表单。

![2025-04-19-10-16-58](http://img.openauth.net.cn/2025-04-19-10-16-58.png)

流程模版使用的表单，需要在【基础配置/表单设计】中添加，具体查看[表单设计-基本介绍](/core/form.html)

选择好表单后，点击“流程设计”进入流程设计。

![2025-04-19-10-19-59](http://img.openauth.net.cn/2025-04-19-10-19-59.png)


#### 节点属性

* 节点名称：**必填** 节点名称
* 三方回调URL：当节点审批完成时，如果需要通知其他系统或模块,则填写对应系统的接口地址。
* 执行权限 **必填** 节点的执行权限，如：指定用户、指定角色等。
    * 所有用户： 任何人都可以审批
    * 指定用户：指定用户审批，当选中这项时需要选择指定的用户
    * 指定角色：指定角色审批，当选中这项时需要选择指定的角色

👉使用[vue版本](/pro/startflow.html)，解锁更多类型：指定SQL、上一节点执行人的直属上级、连续多级直属上级、部门负责人、运行时指定角色、运行时指定用户等等，当然你也可以为[开源版本](https://gitee.com/dotnetchina/OpenAuth.Net)贡献代码，添加更多类型。

👉使用[vue版本](/pro/startflow.html)，设置连线条件属性。你也可以为[开源版本](https://gitee.com/dotnetchina/OpenAuth.Net)贡献代码，让它支持该属性。

## 流程发起

OpenAuth.Net工作流分为两个大类：

1. 无业务关联流程，如请假、报销等。

2. 有业务关联流程，如采购、销售、入库等。

这两种流程的差异有以下几点：

| 对比维度 | 无业务关联流程 | 有业务关联流程 |
|---------|--------------|--------------|
| 适用场景 | 请假、报销等日常办公 | 采购、销售、入库等业务操作 |
| 发起方式 | 流程中心 -> 我的流程 -> 新的申请 | 直接在业务模块中发起（如：仓储中心 -> 入库订单 -> 送审） |
| 表单类型 | 简单表单，适用拖拽表单设计器 | 复杂表单，需要自定义表单或URL表单 |
| 审批结束处理 | 仅更新流程状态 | 需要修改业务数据状态 |

开源版本只能发起无业务关联的流程，使用[vue版本](/pro/startflow.html)，解锁有业务类型关联的流程。当然你也可以为[开源版本](https://gitee.com/dotnetchina/OpenAuth.Net)贡献代码，支持更多类型。

### 无业务关联流程

完成流程模版设计后，在【流程中心/我的流程】中【新的申请】开始创建一个流程实例。

![2025-04-19-10-37-09](http://img.openauth.net.cn/2025-04-19-10-37-09.png)

1. 在左边选择流程模版；

2. 填写待审批的表单内容；

3. 保存完成后，在【流程中心/我的流程】中点击“搜索”按钮刷新查询，就可以看到刚刚发起的流程实例。

## 流程审批

用户可以在【流程中心/待处理流程】中看到自己需要审批的流程，点击【处理】按钮并进行相应的处理；

![2025-04-09-21-28-42](http://img.openauth.net.cn/2025-04-09-21-28-42.png)

其中：

* 同意：流程审批通过，流程结束；

* 不同意：流程审批不通过，流程结束；

* 驳回：可以驳回到指定的步骤，该步骤的人可以重新审批提交；

👉使用[vue版本](/pro/startflow.html)，解锁更多加签、撤销审批操作。你也可以为[开源版本](https://gitee.com/dotnetchina/OpenAuth.Net)贡献代码，让它支持这些功能。





